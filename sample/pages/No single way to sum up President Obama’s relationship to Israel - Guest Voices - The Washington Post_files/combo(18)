TWP=window.TWP||{};TWP.Modules=TWP.Modules||{};(function(A){TWP.Modules.setLargestHeight=function(E,G){var C=typeof E=="string"?A("#"+E):A(G[0]);if(!C){return false;}var B="container"+new Date().getTime(),F=typeof E=="string"?A(".set-largest-height-"+B):A(E),D=0;F.addClass("set-largest-height-"+B).each(function(I,H){var L=A(H);var K=L.css("display"),J=parseInt(L.css({height:"auto",display:K=="none"?"block":""}).css("height"));if(L.hasClass("hide")){L.css("display","");}else{if(K=="none"){L.css("display",K);}}D=J>D?J:D;}).css({height:D});C.addClass("set-largest-height").css({height:D}).find(".lazy.unloaded").addClass("set-larget-height-update");};})(jQuery);TWP.Modules.getMinutesDifference=function(C,B){var A;var D=new Date(C);var E=new Date(B);var F=Math.round((E.getTime()-D.getTime())/1000/60);if((0<F)&&(F<61)){F>1?A="mins":A="min";F+=" "+A+" ago";return F;}else{if((0>F)&&(F>-61)){F=Math.abs(F);F>1?A="mins":A="min";F+=" "+A+" from now";return F;}else{return"";}}};window.TWP=window.TWP||{};TWP.Util=TWP.Util||{};TWP.Util.HeaderDetection=function(){this.setUserAgent(navigator.userAgent);this.getCssClass();};TWP.Util.HeaderDetection.prototype={chrome:false,opera:false,firefox:false,firefox2:false,firefox3:false,firefox3_5:false,ie:false,ie6:false,ie7:false,ie8:false,mozilla:false,safari:false,safari3:false,safari4:false,windows:false,mac:false,linux:false,getCssClass:function(){if(document.getElementById&&document.createTextNode){var A=document.body;if(!A||A==undefined||A==null||A.length==0){setTimeout(function(){var B=TWP.get("Util.HeaderDetection");B.getCssClass();},250);return ;}}else{TWP.log("Browser doesn't support document.getElementById()");return ;}this.addClass("javascript");if(this.windows){this.addClass("windows");}else{if(this.mac){this.addClass("mac");}else{if(this.linux){this.addClass("linux");}}}if(this.ie){this.addClass("ie");if(this.ie8){this.addClass("ie8");}else{if(this.ie7){this.addClass("ie7");}else{if(this.ie6){this.addClass("ie6");}}}}else{if(this.firefox){this.addClass("firefox");if(this.firefox3_5){this.addClass("firefox3-5");}else{if(this.firefox3){this.addClass("firefox3");}else{if(this.firefox2){this.addClass("firefox2");}}}}else{if(this.chrome){this.addClass("chrome");}else{if(this.safari){this.addClass("safari");if(this.safari4){this.addClass("safari4");}else{if(this.safari3){this.addClass("safari3");}}}else{if(this.opera){this.addClass("opera");}else{if(this.mozilla){this.addClass("mozilla");}}}}}}},isChrome:function(){return this.chrome;},isOpera:function(){return this.opera;},isFirefox:function(){return this.firefox;},isFirefox2:function(){return this.firefox2;},isFirefox3:function(){return this.firefox3;},isFirefox3_5:function(){return this.firefox3_5;},isIe:function(){return this.ie;},isIe6:function(){return this.ie6;},isIe7:function(){return this.ie7;},isIe8:function(){return this.ie8;},isMozilla:function(){return this.mozilla;},isSafari:function(){return this.safari;},isSafari3:function(){return this.safari3;},isSafari4:function(){return this.safari4;},isWindows:function(){return this.windows;},isMac:function(){return this.mac;},isLinux:function(){return this.linux;},setUserAgent:function(D){this.userAgent=D;var B=D.toLowerCase();var C="";var A="";if(B.indexOf("msie")!=-1){this.ie=true;C=B.substring(B.indexOf("msie"),B.length);A=C.substring(4,C.indexOf(";"));A=this.trim(A);if(A.charAt(0)=="6"){this.ie6=true;}else{if(A.charAt(0)=="7"){this.ie7=true;}else{if(A.charAt(0)=="8"){this.ie8=true;}}}}else{if(B.indexOf("firefox")!=-1){this.firefox=true;C=B.substring(B.indexOf("firefox"));A=C.substring(8);A=this.trim(A);if(A.charAt(0)=="2"){this.firefox2=true;}else{if(A.charAt(0)=="3"){if(A.match("^"+"3.5")=="3.5"){this.firefox3_5=true;}else{this.firefox3=true;}}}}else{if(B.indexOf("chrome")!=-1){this.chrome=true;}else{if(B.indexOf("safari")!=-1){this.safari=true;C=B.substring(B.indexOf("version/"));A=C.substring(8);A=this.trim(A);if(A.charAt(0)=="3"){this.safari3=true;}else{if(A.charAt(0)=="4"){this.safari4=true;}}}else{if(B.indexOf("opera")!=-1){this.opera=true;}else{if(B.indexOf("mozilla")!=-1){this.mozilla=true;}}}}}}if(B.indexOf("windows")!=-1){this.windows=true;}else{if(B.indexOf("macintosh")!=-1){this.mac=true;}else{if(B.indexOf("linux")!=-1){this.linux=true;}}}},addClass:function(B){if(document.getElementById&&document.createTextNode){var A=document.body;if(A){A.className+=A.className?" "+B:B;}}},trim:function(A){return(A.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,""));}};TWP.register("Util.HeaderDetection",new TWP.Util.HeaderDetection());try{var user=jQuery.cookie("wapo_login_id");var wpatc=jQuery.cookie("WPATC");if(user&&wpatc&&!wpatc.match(/\:K\=\d+/)){var url=TWP.signin.api_url+"?method=getDomainTag&username="+user;var d=new Date();var expireTime=d.setHours(d.getHours()+24);jQuery.ajax({type:"GET",url:url,datatype:"json",success:function(A){wpatc=wpatc.replace(/\:K\=\d+/,"");TWP.log(wpatc+":K="+A.K);thisData=jQuery.parseJSON(A);jQuery.cookie("WPATC",wpatc+":K="+thisData.K,{domain:"washingtonpost.com",expires:new Date(expireTime),path:"/"});}});}}catch(e){}jQuery(window).scroll(function(){TWP.Engagement.scroll++;}).click(function(){TWP.Engagement.click++;}).keydown(function(){TWP.Engagement.keydown++;}).unload(function(){var D=Math.floor(Math.random()*100);if(D==0){if(TWP.Timing&&TWP.Engagement){var C=(TWP.Engagement.scroll)?"event24":"";var A=Math.ceil(TWP.Timing.docReady/(1000*5));var B=Math.ceil(TWP.Timing.windowLoad/(1000*5));}}});jQuery(document).ready(function(){if(TWP.Timing){TWP.Timing.docReady=(new Date())-TWP.Timing.start;}});jQuery(window).load(function(){if(TWP.Timing){TWP.Timing.windowLoad=(new Date())-TWP.Timing.start;}});(function(A){if(typeof A=="function"){TWP=window.TWP||{};TWP.Util=window.TWP.Util||{};TWP.Util.TrackClick=function(D,C,K){var F=A(D),I="",G="",H="",J="",E="",B="";I=F.text().replace(/\s+/g," ");if(!I){I=F.attr("alt").replace(/\s+/g," ");}if(A().closest){G=F.closest("*[data-tracking-type]").attr("data-tracking-type")||"unknown";H=F.closest("*[data-tracking-section]").attr("data-tracking-section")||"";J=F.closest("*[data-tracking-ctx]").attr("data-tracking-ctx")||"body";}else{G=A(F.parents("*[data-tracking-type]").get(0)).attr("data-tracking-type")||"unknown";H=A(F.parents("*[data-tracking-section]").get(0)).attr("data-tracking-section")||"";J=A(F.parents("*[data-tracking-ctx]").get(0)).attr("data-tracking-ctx")||"body";}if(G.match(/^(utility|main|hot-topics)$/)||!H){E=J+":"+G;}else{E=J+":"+G+" - "+H;}E=E.toLowerCase();if(G.match(/^(utility|in|masthead|sub-nav|unknown)$/)&&!!I){B=E+" - "+I;}else{if(G.match(/^main|hot-topics$/)&&!!H){B=E+" - "+H;}else{B=E;}}B=B.toLowerCase();if(K.debug){if(!!window.console){console.log("customLinkName:"+E+"\n"+"prop:"+B);}}if(!!window.s&&typeof s.sendDataToOmniture=="function"){s.sendDataToOmniture(E,"",{"channel":s.channel,"prop28":B});}};}})(jQuery);