var swfobject=function(){var AQ="undefined",Ac="object",AB="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",Ad="application/x-shockwave-flash",AC="SWFObjectExprInst",AW="onreadystatechange",AF=window,Ak=document,Aa=navigator,AA=false,Z=[Am],Af=[],AG=[],AL=[],Ai,AD,AP,AS,AK=false,At=false,Ag,AN,Ah=true,AH=function(){var A=typeof Ak.getElementById!=AQ&&typeof Ak.getElementsByTagName!=AQ&&typeof Ak.createElement!=AQ,E=Aa.userAgent.toLowerCase(),C=Aa.platform.toLowerCase(),H=C?/win/.test(C):/win/.test(E),J=C?/mac/.test(C):/mac/.test(E),G=/webkit/.test(E)?parseFloat(E.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,D=!+"\v1",F=[0,0,0],K=null;if(typeof Aa.plugins!=AQ&&typeof Aa.plugins[AB]==Ac){K=Aa.plugins[AB].description;if(K&&!(typeof Aa.mimeTypes!=AQ&&Aa.mimeTypes[Ad]&&!Aa.mimeTypes[Ad].enabledPlugin)){AA=true;D=false;K=K.replace(/^.*\s+(\S+\s+\S+$)/,"$1");F[0]=parseInt(K.replace(/^(.*)\..*$/,"$1"),10);F[1]=parseInt(K.replace(/^.*\.(.*)\s.*$/,"$1"),10);F[2]=/[a-zA-Z]/.test(K)?parseInt(K.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof AF.ActiveXObject!=AQ){try{var I=new ActiveXObject(X);if(I){K=I.GetVariable("$version");if(K){D=true;K=K.split(" ")[1].split(",");F=[parseInt(K[0],10),parseInt(K[1],10),parseInt(K[2],10)];}}}catch(B){}}}return{w3:A,pv:F,wk:G,ie:D,win:H,mac:J};}(),Aj=function(){if(!AH.w3){return ;}if((typeof Ak.readyState!=AQ&&Ak.readyState=="complete")||(typeof Ak.readyState==AQ&&(Ak.getElementsByTagName("body")[0]||Ak.body))){Ao();}if(!AK){if(typeof Ak.addEventListener!=AQ){Ak.addEventListener("DOMContentLoaded",Ao,false);}if(AH.ie&&AH.win){Ak.attachEvent(AW,function(){if(Ak.readyState=="complete"){Ak.detachEvent(AW,arguments.callee);Ao();}});if(AF==top){(function(){if(AK){return ;}try{Ak.documentElement.doScroll("left");}catch(A){setTimeout(arguments.callee,0);return ;}Ao();})();}}if(AH.wk){(function(){if(AK){return ;}if(!/loaded|complete/.test(Ak.readyState)){setTimeout(arguments.callee,0);return ;}Ao();})();}Ab(Ao);}}();function Ao(){if(AK){return ;}try{var B=Ak.getElementsByTagName("body")[0].appendChild(AR("span"));B.parentNode.removeChild(B);}catch(A){return ;}AK=true;var D=Z.length;for(var C=0;C<D;C++){Z[C]();}}function AJ(A){if(AK){A();}else{Z[Z.length]=A;}}function Ab(A){if(typeof AF.addEventListener!=AQ){AF.addEventListener("load",A,false);}else{if(typeof Ak.addEventListener!=AQ){Ak.addEventListener("load",A,false);}else{if(typeof AF.attachEvent!=AQ){Al(AF,"onload",A);}else{if(typeof AF.onload=="function"){var B=AF.onload;AF.onload=function(){B();A();};}else{AF.onload=A;}}}}}function Am(){if(AA){Y();}else{AM();}}function Y(){var D=Ak.getElementsByTagName("body")[0];var B=AR(Ac);B.setAttribute("type",Ad);var A=D.appendChild(B);if(A){var C=0;(function(){if(typeof A.GetVariable!=AQ){var E=A.GetVariable("$version");if(E){E=E.split(" ")[1].split(",");AH.pv=[parseInt(E[0],10),parseInt(E[1],10),parseInt(E[2],10)];}}else{if(C<10){C++;setTimeout(arguments.callee,10);return ;}}D.removeChild(B);A=null;AM();})();}else{AM();}}function AM(){var G=Af.length;if(G>0){for(var H=0;H<G;H++){var C=Af[H].id;var L=Af[H].callbackFn;var A={success:false,id:C};if(AH.pv[0]>0){var I=Ar(C);if(I){if(AO(Af[H].swfVersion)&&!(AH.wk&&AH.wk<312)){AX(C,true);if(L){A.success=true;A.ref=AU(C);L(A);}}else{if(Af[H].expressInstall&&AT()){var E={};E.data=Af[H].expressInstall;E.width=I.getAttribute("width")||"0";E.height=I.getAttribute("height")||"0";if(I.getAttribute("class")){E.styleclass=I.getAttribute("class");}if(I.getAttribute("align")){E.align=I.getAttribute("align");}var F={};var D=I.getElementsByTagName("param");var K=D.length;for(var J=0;J<K;J++){if(D[J].getAttribute("name").toLowerCase()!="movie"){F[D[J].getAttribute("name")]=D[J].getAttribute("value");}}AE(E,F,C,L);}else{Ae(I);if(L){L(A);}}}}}else{AX(C,true);if(L){var B=AU(C);if(B&&typeof B.SetVariable!=AQ){A.success=true;A.ref=B;}L(A);}}}}}function AU(B){var D=null;var C=Ar(B);if(C&&C.nodeName=="OBJECT"){if(typeof C.SetVariable!=AQ){D=C;}else{var A=C.getElementsByTagName(Ac)[0];if(A){D=A;}}}return D;}function AT(){return !At&&AO("6.0.65")&&(AH.win||AH.mac)&&!(AH.wk&&AH.wk<312);}function AE(F,D,H,E){At=true;AP=E||null;AS={success:false,id:H};var A=Ar(H);if(A){if(A.nodeName=="OBJECT"){Ai=An(A);AD=null;}else{Ai=A;AD=H;}F.id=AC;if(typeof F.width==AQ||(!/%$/.test(F.width)&&parseInt(F.width,10)<310)){F.width="310";}if(typeof F.height==AQ||(!/%$/.test(F.height)&&parseInt(F.height,10)<137)){F.height="137";}Ak.title=Ak.title.slice(0,47)+" - Flash Player Installation";var B=AH.ie&&AH.win?"ActiveX":"PlugIn",C="MMredirectURL="+AF.location.toString().replace(/&/g,"%26")+"&MMplayerType="+B+"&MMdoctitle="+Ak.title;if(typeof D.flashvars!=AQ){D.flashvars+="&"+C;}else{D.flashvars=C;}if(AH.ie&&AH.win&&A.readyState!=4){var G=AR("div");H+="SWFObjectNew";G.setAttribute("id",H);A.parentNode.insertBefore(G,A);A.style.display="none";(function(){if(A.readyState==4){A.parentNode.removeChild(A);}else{setTimeout(arguments.callee,10);}})();}AZ(F,D,H);}}function Ae(A){if(AH.ie&&AH.win&&A.readyState!=4){var B=AR("div");A.parentNode.insertBefore(B,A);B.parentNode.replaceChild(An(A),B);A.style.display="none";(function(){if(A.readyState==4){A.parentNode.removeChild(A);}else{setTimeout(arguments.callee,10);}})();}else{A.parentNode.replaceChild(An(A),A);}}function An(B){var D=AR("div");if(AH.win&&AH.ie){D.innerHTML=B.innerHTML;}else{var E=B.getElementsByTagName(Ac)[0];if(E){var A=E.childNodes;if(A){var F=A.length;for(var C=0;C<F;C++){if(!(A[C].nodeType==1&&A[C].nodeName=="PARAM")&&!(A[C].nodeType==8)){D.appendChild(A[C].cloneNode(true));}}}}}return D;}function AZ(E,G,C){var D,A=Ar(C);if(AH.wk&&AH.wk<312){return D;}if(A){if(typeof E.id==AQ){E.id=C;}if(AH.ie&&AH.win){var F="";for(var I in E){if(E[I]!=Object.prototype[I]){if(I.toLowerCase()=="data"){G.movie=E[I];}else{if(I.toLowerCase()=="styleclass"){F+=' class="'+E[I]+'"';}else{if(I.toLowerCase()!="classid"){F+=" "+I+'="'+E[I]+'"';}}}}}var H="";for(var J in G){if(G[J]!=Object.prototype[J]){H+='<param name="'+J+'" value="'+G[J]+'" />';}}A.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+F+">"+H+"</object>";AG[AG.length]=E.id;D=Ar(E.id);}else{var B=AR(Ac);B.setAttribute("type",Ad);for(var K in E){if(E[K]!=Object.prototype[K]){if(K.toLowerCase()=="styleclass"){B.setAttribute("class",E[K]);}else{if(K.toLowerCase()!="classid"){B.setAttribute(K,E[K]);}}}}for(var L in G){if(G[L]!=Object.prototype[L]&&L.toLowerCase()!="movie"){Ap(B,L,G[L]);}}A.parentNode.replaceChild(B,A);D=B;}}return D;}function Ap(B,D,C){var A=AR("param");A.setAttribute("name",D);A.setAttribute("value",C);B.appendChild(A);}function AV(A){var B=Ar(A);if(B&&B.nodeName=="OBJECT"){if(AH.ie&&AH.win){B.style.display="none";(function(){if(B.readyState==4){As(A);}else{setTimeout(arguments.callee,10);}})();}else{B.parentNode.removeChild(B);}}}function As(A){var B=Ar(A);if(B){for(var C in B){if(typeof B[C]=="function"){B[C]=null;}}B.parentNode.removeChild(B);}}function Ar(A){var C=null;try{C=Ak.getElementById(A);}catch(B){}return C;}function AR(A){return Ak.createElement(A);}function Al(A,C,B){A.attachEvent(C,B);AL[AL.length]=[A,C,B];}function AO(A){var B=AH.pv,C=A.split(".");C[0]=parseInt(C[0],10);C[1]=parseInt(C[1],10)||0;C[2]=parseInt(C[2],10)||0;return(B[0]>C[0]||(B[0]==C[0]&&B[1]>C[1])||(B[0]==C[0]&&B[1]==C[1]&&B[2]>=C[2]))?true:false;}function AY(B,F,A,C){if(AH.ie&&AH.mac){return ;}var E=Ak.getElementsByTagName("head")[0];if(!E){return ;}var G=(A&&typeof A=="string")?A:"screen";if(C){Ag=null;AN=null;}if(!Ag||AN!=G){var D=AR("style");D.setAttribute("type","text/css");D.setAttribute("media",G);Ag=E.appendChild(D);if(AH.ie&&AH.win&&typeof Ak.styleSheets!=AQ&&Ak.styleSheets.length>0){Ag=Ak.styleSheets[Ak.styleSheets.length-1];}AN=G;}if(AH.ie&&AH.win){if(Ag&&typeof Ag.addRule==Ac){Ag.addRule(B,F);}}else{if(Ag&&typeof Ak.createTextNode!=AQ){Ag.appendChild(Ak.createTextNode(B+" {"+F+"}"));}}}function AX(A,C){if(!Ah){return ;}var B=C?"visible":"hidden";if(AK&&Ar(A)){Ar(A).style.visibility=B;}else{AY("#"+A,"visibility:"+B);
}}function AI(B){var A=/[\\\"<>\.;]/;var C=A.exec(B)!=null;return C&&typeof encodeURIComponent!=AQ?encodeURIComponent(B):B;}var Aq=function(){if(AH.ie&&AH.win){window.attachEvent("onunload",function(){var A=AL.length;for(var B=0;B<A;B++){AL[B][0].detachEvent(AL[B][1],AL[B][2]);}var D=AG.length;for(var C=0;C<D;C++){AV(AG[C]);}for(var E in AH){AH[E]=null;}AH=null;for(var F in swfobject){swfobject[F]=null;}swfobject=null;});}}();return{registerObject:function(A,E,C,B){if(AH.w3&&A&&E){var D={};D.id=A;D.swfVersion=E;D.expressInstall=C;D.callbackFn=B;Af[Af.length]=D;AX(A,false);}else{if(B){B({success:false,id:A});}}},getObjectById:function(A){if(AH.w3){return AU(A);}},embedSWF:function(K,E,H,F,C,A,B,I,G,J){var D={success:false,id:E};if(AH.w3&&!(AH.wk&&AH.wk<312)&&K&&E&&H&&F&&C){AX(E,false);AJ(function(){H+="";F+="";var Q={};if(G&&typeof G===Ac){for(var O in G){Q[O]=G[O];}}Q.data=K;Q.width=H;Q.height=F;var N={};if(I&&typeof I===Ac){for(var P in I){N[P]=I[P];}}if(B&&typeof B===Ac){for(var L in B){if(typeof N.flashvars!=AQ){N.flashvars+="&"+L+"="+B[L];}else{N.flashvars=L+"="+B[L];}}}if(AO(C)){var M=AZ(Q,N,E);if(Q.id==E){AX(E,true);}D.success=true;D.ref=M;}else{if(A&&AT()){Q.data=A;AE(Q,N,E,J);return ;}else{AX(E,true);}}if(J){J(D);}});}else{if(J){J(D);}}},switchOffAutoHideShow:function(){Ah=false;},ua:AH,getFlashPlayerVersion:function(){return{major:AH.pv[0],minor:AH.pv[1],release:AH.pv[2]};},hasFlashPlayerVersion:AO,createSWF:function(A,B,C){if(AH.w3){return AZ(A,B,C);}else{return undefined;}},showExpressInstall:function(B,A,D,C){if(AH.w3&&AT()){AE(B,A,D,C);}},removeSWF:function(A){if(AH.w3){AV(A);}},createCSS:function(B,A,C,D){if(AH.w3){AY(B,A,C,D);}},addDomLoadEvent:AJ,addLoadEvent:Ab,getQueryParamValue:function(B){var A=Ak.location.search||Ak.location.hash;if(A){if(/\?/.test(A)){A=A.split("?")[1];}if(B==null){return AI(A);}var C=A.split("&");for(var D=0;D<C.length;D++){if(C[D].substring(0,C[D].indexOf("="))==B){return AI(C[D].substring((C[D].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(At){var A=Ar(AC);if(A&&Ai){A.parentNode.replaceChild(Ai,A);if(AD){AX(AD,true);if(AH.ie&&AH.win){Ai.style.display="block";}}if(AP){AP(AS);}}At=false;}}};}();(function(A){A.fn.tabbedpanels=function(B){var C={activeClass:"on",hiddenClass:"hide"},B=A.extend({},C,B);return this.each(function(){var F=A(this),E=F.find("ul.tabs").eq(0),D=E.find("li.hide"),J=D.find("a"),H=E.find("li a"),I=F.find(".panels"),G=F.find("div.panels:eq(0)>div.panel");panelsVariable=F.find("div.panels-variable-length:eq(0)>div.panel");D.hide().removeClass("hide").show("slow",function(){});if(I.length>0&&panelsVariable.length==0){TWP.Modules.setLargestHeight(G,I);}H.click(function(M){M.preventDefault();var L=A(this),K=L.attr("data-tab-title")||L.attr("href"),N=A(G).filter(function(){return A(this).hasClass(K);});H.not(L).removeClass(B.activeClass);L.addClass(B.activeClass);G.addClass(B.hiddenClass);N.removeClass(B.hiddenClass);if(I.length>0&&panelsVariable.length==0){TWP.Modules.setLargestHeight(G,I);}});});};})(jQuery);(function(A){A.fn.accordion=function(B){return this.each(function(){var C=A(this),D={expand:"expand",closed:"closed",bkgd:"bkgd-grey-gradient"};C.find(".acitem").hide();C.find("li.expand > .acitem").show();C.find("li a.title").click(function(E){E.preventDefault();var I=A(E.target).parents("li")[0];var H=A(I).children(".acitem");var G=A(H,I);var F=A(I).siblings();A(G).slideToggle("fast");A(I).hasClass(D.expand)?A(I).removeClass(D.expand):A(I).addClass(D.expand);A(I).hasClass(D.closed)?A(I).removeClass(D.closed).removeClass(D.bkgd):A(I).addClass(D.closed).addClass(D.bkgd);if(A(F.hasClass(D.expand))){A(F).removeClass(D.expand).addClass(D.closed).addClass(D.bkgd).find("ol").slideUp();}});});};})(jQuery);(function(A){A.fn.tooltip=function(B){return this.each(function(){new A.tooltip(this,B);});};A.tooltip=function(C,B){this.el=A(C).get(0);this.options={inner:false};this.options=A.extend(B);this.props={classes:{overState:"on",hidden:"hide"},initial:true};this.elems={};this.init();};A.tooltip.fn=A.tooltip.prototype={};A.tooltip.fn.extend=A.tooltip.extend=jQuery.extend;A.tooltip.fn.extend({init:function(){this.cacheElems();this.assignHandlers();},cacheElems:function(){this.elems.$toolTip=A(this.el);this.elems.$toolTipText=A("span:eq(0)",this.el);this.elems.$toolTipRel=A(this.el).attr("rel");},assignHandlers:function(){var B=this;this.elems.$toolTip.mouseenter(function(C){if(typeof B.elems.$toolTipRel!=="undefined"&&A(this).find("span.thistip").length==0){A(B.elems.$toolTipRel).clone().prependTo(A(this)).wrap('<span class="thistip" />');}if(typeof B.elems.$toolTipRel!=="undefined"){B.elems.$toolTipText=A("span:eq(0)",this);}B.sizeIt(B);B.showTip(B);B.props.initial=false;C.stopPropagation();C.stopImmediatePropagation();});this.elems.$toolTip.mouseleave(function(C){B.hideTip(B);});},sizeIt:function(C){if(typeof C.elems.$toolTipRel=="undefined"){var B=this.elems.$toolTipText.height();if(C.props.initial){this.elems.$toolTipText.height(B/4);}else{this.elems.$toolTipText.height(B);}}},showTip:function(B){this.elems.$toolTipText.addClass(this.props.classes.overState);},hideTip:function(B){this.elems.$toolTipText.removeClass(this.props.classes.overState);}});})(jQuery);TWP=window.TWP||{};TWP.Social=TWP.Social||{};(function(A){TWP.Social.ShareBox=function(C,B){var K=C,J=K.hasClass("bottom")?false:true,N={"facebook":{name:"Facebook",url:"http://www.facebook.com/sharer.php?u={shareURL}&title={shareTitle}"},"digg":{name:"Digg",url:"http://digg.com/submit?phase=2&url={shareURL}&title={shareTitle}"},"stumble-upon":{name:"Stumble Upon",url:"http://www.stumbleupon.com/submit?url={shareURL}&title{shareTitle}"},"email":{name:"Email",url:"mailto:?subject=The Washington Post: {shareURL}&body={shareTitle}%0A{shareURL}",emailURL:"{emailURL}"},"rss":{name:"RSS",url:"{rssURL}"},"twitter":{name:"Twitter",url:"http://twitter.com/home?status={shareURL}&title={shareTitle}"},"delicious":{name:"Delicious",url:"http://del.icio.us/post?v=4&noui&jump=close&url={shareURL}&title={shareTitle}"},"yahoo-buzz":{name:"Yahoo Buzz",url:"http://buzz.yahoo.com/submit/?submitUrl={shareURL}&title={shareTitle}"},"linkedin":{name:"LinkedIn",url:"http://www.linkedin.com/shareArticle?mini=true&url={shareURL}&title={shareTitle}"}},I=this.shareBox=A('<div class="share-box"/>').append(A('<div class="left odd"/>')).append(A('<div class="left even"/>')).append(A('<div class="clear"/>')),O=A(I).find(".odd"),E=I.find(".even"),H=0;var P=function(){if(B){K.addClass("click-only");}I.css("display","none");A("body").append(I);L();if(!K.hasClass("click-only")){K.bind("mouseenter",M);}K.unbind("click");K.bind("click",M);K.bind("mouseleave",D);I.bind("mouseleave",D);I.bind("mouseenter",M);};this.addNetwork=function(R,Q,S){N[R]={url:S,name:Q};L();};var L=this.updateLinks=function(){var Q=K.attr("href"),X=K.attr("title"),R=K.attr("emailurl"),W=K.attr("rss");var Y=[];if(K.attr("rel").toLowerCase().match("all")){for(var T in N){if(T=="rss"){if(W){Y.push(T);}}else{Y.push(T);}}}else{Y=K.attr("rel").split(",");}E.html("");O.html("");for(var V in Y){T=Y[V];if(N[T]){var S=N[T];var U=V%2?E:O;S.el=A('<a class="'+T+' icon share"/>',{target:"_blank"});S.el.attr("href",A.substitute((R&&T=="email")?S.emailURL:S.url,{shareURL:escape(Q),shareTitle:X,emailURL:R,rssURL:W}));S.el.text(S.name);U.append(S.el);if(R&&T=="email"){S.el.addClass("iframe-overlay").attr("config","width=850&height=800");}}}};var M=this.show=function(Q){if(Q){Q.preventDefault();}clearInterval(H);L();F();I.css("display","block");};var D=function(Q){if(Q){Q.preventDefault();}clearInterval(H);H=setTimeout(G,200);};var G=this.hide=function(){I.css("display","none");};var F=this.position=function(){var R=I.css("display");I.css({display:"block"});var Q=K.offset();I.offset({left:Q.left,top:Q.top+(J?(-parseInt(I.css("height"))-2):(parseInt(K.css("height"))+2))});I.css({display:R});};P();};}(jQuery));TWP=window.TWP||{};TWP.OmniPlayerCallBacks=TWP.OmniPlayerCallBacks||{};TWP.Video=TWP.Video||{};(function(A){TWP.Video.OmniPlayer=function(B,E,C){var G="player"+new Date().getTime(),F=this.config={swf:null,videoTag:null,isIos:!!navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/),currentJSON:E,playerConfig:C||{},container:typeof B=="string"?A(B):B},D={version:"9.0",fixedAttributes:{wmode:"opaque",allowScriptAccess:"always",allowFullScreen:"true",swLiveConnect:"true"},flashVars:{onLoad:"TWP.OmniPlayerCallBacks."+G+".onLoad"},movie:TWP.eidosBase+"/rw/sites/twpweb/swf/OmniPlayer.swf"};
var H=function(){F.swf=A(F.container).find("object,embed")[0];J();};var J=this.loadVideo=function(){if(F.isIos){}else{A.ajax({url:F.currentJSON,success:function(M,L){var K=A.parseJSON(L.responseText);if(window.TRC&&K&&K.id&&K.flvURL&&TWP.eidosBase=="http://www.washingtonpost.com"){TRC.playVideo(K.id,K.permaLinkURL);}}});}F.swf.loadJSON(F.currentJSON);};var I=function(){if(F.isIos){}else{TWP.OmniPlayerCallBacks[G]={};TWP.OmniPlayerCallBacks[G].onLoad=H;D.flashVars=A.extend(D.flashVars,F.playerConfig);var K=new Date().getTime();A("<div/>",{id:K}).appendTo(F.container);swfobject.embedSWF(D.movie,K,"100%","100%",D.version,null,D.flashVars,D.fixedAttributes);}};I.apply(this);};}(jQuery));TWP=window.TWP||{};TWP.Eidos=TWP.Eidos||{};TWP.Eidos.Modules=TWP.Eidos.Modules||{};(function(A){TWP.Eidos.Modules.Flipper=function(E,P){var K=this,L=A(E),N=L.find(".flipper-main"),Q=L.find(".flipper-caption"),C={caption:L.find(".caption"),fullscreen:L.find(".large.modal"),left:L.find(".left-arrow"),right:L.find(".right-arrow"),floatLeft:A('<div class="flipper-float"/>'),floatRight:A('<div class="flipper-float"/>')},I={top:0,position:"absolute",width:"50%",zIndex:11,cursor:"pointer",opacity:0,backgroundColor:"white"},T=[],R=0,G={NORMAL:"normal",FULLSCREEN:"fullscreen"},J=P?P:G.NORMAL;var O=function(){N.css({display:"block"});C.floatLeft.css(I).css({left:0,height:N.css("height")}).appendTo(N);C.floatRight.css(I).css({right:0,height:N.css("height")}).appendTo(N);if(C.left&&C.right){C.left.on("click",function(X){D(X,-1);});C.right.on("click",function(X){D(X,1);});}C.floatLeft.on("click",function(X){D(X,-1);});C.floatRight.on("click",function(X){D(X,1);});if(Q.find("p").length==0){var W=A("<p/>",{text:Q.text()});Q.text("");Q.append(W);}if(C.caption){C.caption.on("click",F);if(J==G.FULLSCREEN){C.fullscreen.css("display","none");}var V={display:"block",zIndex:10,opacity:0};if(J!=G.FULLSCREEN){V.top=(Q.hasClass("up"))?N.css("height"):parseInt(N.css("height"))-parseInt(Q.css("height"))+"px";}else{V.bottom="0px";Q.css("top","");}Q.css(V);N.append(Q);}if(C.fullscreen){C.fullscreen.on("click",B);}N.find("img").remove();L.find(".thumbs a").each(function(Z,X){var Y=new H(X);T.push(Y);A(Y.link).on("click",function(a){a.preventDefault();U(A.inArray(Y,T));});if(A(Y.thumb).hasClass("on")){R=Z;}N.append(Y.normal);N.append(Y.fullscreen);Y.normal.css({opacity:0,position:"absolute"});Y.fullscreen.css({opacity:0,position:"absolute"});});U(R);if(Q.hasClass("up")){Q.removeClass("up");F(null);}};var D=function(W,V){if(W){W.preventDefault();}if(!A(W.target).hasClass("deactivated")){U(R+V);}};var U=function(W){W=W<0?0:W;W=W>=T.length?T.length-1:W;if(C.left){C.left.toggleClass("deactivated",W==0);C.right.toggleClass("deactivated",W==T.length-1);}C.floatLeft.toggleClass("deactivated",W==0);C.floatRight.toggleClass("deactivated",W==T.length-1);var V=T[W];if(W!=R){S(T[R],false);Q.find("p").html(V.caption);}R=W;if(!V.loaded[J]){M(V,J,function(){if(W==R){S(V,true);}});}else{S(V,true);}A(K).trigger("flipper:PhotoChanged",R);};var S=function(V,W){var X=W?1:0;V.thumb.toggleClass("on",W);if(!W){V.normal.animate({opacity:X},250);V.fullscreen.animate({opacity:X},250);}else{V[J].animate({opacity:X},250);}};var M=function(X,V,Y){var W=X[V];W.load(function(){X.loaded[V]=true;var Z=function(){var a=parseInt(X[V].css("height"));var b=parseInt(X[V].css("width"));if(a!=0&&b!=0){if(V==G.FULLSCREEN){N.css({width:b+"px",height:a+"px"});}else{X[V].css({left:"50%",top:(parseInt(N.css("height"))-a)/2+"px",marginLeft:-b/2+"px"});}}else{setTimeout(Z,10);}};Z();Y();});W.attr("src",X.url[V]);};var F=function(W){if(W){W.preventDefault();}var V={};V.opacity=(Q.hasClass("up"))?0:0.6;if(J!=G.FULLSCREEN){V.top=(Q.hasClass("up"))?N.css("height"):parseInt(N.css("height"))-parseInt(Q.css("height"))+"px";}if(Q.hasClass("up")){Q.animate(V);Q.removeClass("up");}else{Q.animate(V);Q.addClass("up");}A(K).trigger("flipper:CaptionToggle");};var B=function(W){W.preventDefault();var X=new Date().getTime();var V=L.clone().attr("id",X);new TWP.Overlay(V,{callback:function(){var Y=new TWP.Eidos.Modules.Flipper(A("#"+X),G.FULLSCREEN);A(Y).on("flipper:PhotoChanged",function(a,Z){U(Z);});A(Y).on("flipper:CaptionToggle",F);}});};var H=function(W){var V=this.thumb=A(W).find("img");this.link=W;this.caption=V.attr("alt");this.url={fullscreen:W.getAttribute("fullscreen"),normal:W.getAttribute("href")};this.loaded={fullscreen:false,normal:false};this.normal=A("<img/>");this.fullscreen=A("<img/>");};O.apply(this);};}(jQuery));(function(A){A.fn.timestamp=function(R){var F={override:true,regardAttrs:true,regardArgs:true},M=365*24*60*60*1000,N=24*60*60*1000,G=60*60*1000,E=60*1000,D=1000,Q=new Date().getTime(),R=A.extend({},F,R),C=["January","February","March","April","May","June","July","August","September","October","November","December"],H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],P=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],L=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],I={"y":" years","d":" days","h":" hours","m":" minutes","s":" seconds","ms":" milliseconds"},O={"y":" yrs","d":" days","h":" hrs","m":" mins","s":" secs","ms":"ms"},K={"y":"y","d":"d","h":"h","m":"m","s":"s","ms":"ms"},J={"y":"","d":"","h":"","m":"","s":"","m":""},B=/wp.com\/(homepage|local)/;return this.each(function(){var a=A(this),AI=R.override.toString().toLowerCase()=="true",g=R.regardAttrs.toString().toLowerCase()=="true",i=R.regardArgs.toString().toLowerCase()=="true",l=(AI&&i&&parseInt(R.epochTime))||(g&&parseInt(a.attr("epochTime")))||(i&&parseInt(R.epochTime))||Q,AD=(AI&&i&&parseInt(R.now))||(g&&parseInt(a.attr("now")))||(i&&parseInt(R.now))||Q,k=!!((AD-l)<0),w=(AI&&i&&parseInt(R.compareTime))||(g&&parseInt(a.attr("compareTime")))||(i&&parseInt(R.compareTime))||l,f=(AI&&i&&R.contentType)||(g&&a.attr("contentType"))||(i&&R.contentType),j=(AI&&i&&R.pageType)||(g&&a.attr("pageType"))||(i&&R.pageType)||"module",AS=(AI&&i&&R.dateTitle)||(g&&a.attr("dateTitle"))||(i&&R.dateTitle)||"",AA=(AI&&i&&R.channel)||(g&&a.attr("channel"))||(i&&R.dateTitle)||"wp.com",r=(AI&&i&&R.dateFormat)||(g&&a.attr("dateFormat"))||(i&&R.dateFormat)||"default",o=(AI&&i&&parseInt(R.thresholdAge))||(g&&parseInt(a.attr("thresholdAge")))||(i&&parseInt(R.thresholdAge))||q(),m=(AI&&i&&parseInt(R.thresholdRecent))||(g&&parseInt(a.attr("thresholdRecent")))||(i&&parseInt(R.thresholdRecent))||AL(),X=(AI&&i&&parseInt(R.thresholdArchive))||(g&&parseInt(a.attr("thresholdArchive")))||(i&&parseInt(R.thresholdArchive))||AO(),AH=(AI&&i&&parseInt(R.thresholdFuture))||(g&&parseInt(a.attr("thresholdFuture")))||(i&&parseInt(R.thresholdFuture))||b(),s=(AI&&i&&R.discussionStatus)||(g&&a.attr("discussionStatus"))||(i&&R.discussionStatus),AK=(AI&&i&&R.unitsAge)||(g&&a.attr("unitsAge"))||(i&&R.unitsAge)||"abbr",AJ=(AI&&i&&R.sigFigsAge)||(g&&a.attr("sigFigsAge"))||(i&&R.sigFigsAge)||6,AC=(AI&&i&&R.placement)||(g&&a.attr("placement"))||(i&&R.placement)||"append",V=(AI&&i&&R.template)||(g&&a.attr("template"))||(i&&R.template)||Y();if(l){a.addClass("processed").removeClass("pre");var AN=new Date(l),AF=new Date(AD),AP=new Date(w),W=y(AN,AF),AE=t(AN,AF),U=((AD-l)>=0)?(AD-l):(l-AD),AR=z(U),e=AM(U),Z=u(U);if(j=="leaf"){var AB=(parseInt(l)==parseInt(w)),v=y(AN,AP),AQ=t(AN,AP);if(AB){if(AS=="published"){if(AE){r="leaf-recent";}else{if(AR<z(X)){r="leaf-old";V="Published: {{ timestamp }}";}else{r="leaf-archive";V="Published: {{ timestamp }}";}}}else{if(AS=="updated"){r="none";V="";}else{r="none";V="";}}}else{if(AQ){if(AS=="published"){if(AE){r="none";}else{if(AR<z(X)){r="leaf-old";V="Published: {{ timestamp }}";}else{r="leaf-archive";V="Published: {{ timestamp }}";}}}else{if(AS=="updated"){if(AE){r="leaf-recent";V="Updated: {{ timestamp }}";}else{r="none";}}else{r="none";V="";}}}else{if(AS=="published"){if(AR<z(X)){r="leaf-old";V="Published: {{ timestamp }} | ";}else{r="leaf-archive";V="Published: {{ timestamp }} | ";}}else{if(AS=="updated"){r="leaf-recent";V="Updated: {{ timestamp }}";}else{r="none";
V="";}}}}}else{if(r=="default"){if(f=="live_discussion"){if(s=="pre"){if(AE){r="recent";}else{if(k){if(e<AM(AH)){r="recent-detailed";}else{if(W){r="old";}else{r="archive";}}}else{r="none";}}}else{if(s=="live"){r="live";}else{r="none";}}}else{if(!!AA.toLowerCase().match(B)){if(e>=0&&e<AM(m)){r="recent";}else{r="none";}}else{if(AE){r="recent";}else{if(AR<z(X)){r="old";}else{r="archive";}}}}}else{if(r=="stream-blog"){if(e>=0&&e<AM(o)){AK="full";AJ=(Z<61||e>24)?1:2;V=(k)?"Live in {{ timestamp }}":"Updated {{ timestamp }} ago";r="age";}else{if(AE){r="recent";}else{if(AR<z(X)){r="old";}else{r="archive";}}}}else{if(r=="stream-topic"){if(f=="live_discussion"&&s.match(/^pre|live$/)){if(s=="live"){V="<b>LIVE<br/>NOW</b>";}else{if(AE){r="recent";V="<b>TODAY<br/>{{timestamp}}</b>";}else{if(AR<z(X)){r="old-stream-topic";}else{r="archive-stream-topic";}}}}else{if(AE){r="recent-stream-topic";}else{if(AR<z(X)){r="old-stream-topic";}else{r="archive-stream-topic";}}}}}}}switch(AC){case"prepend":a.prepend(AG());break;case"replace":a.empty().append(AG());break;case"append":a.append(AG());break;default:a.append(AG());break;}if(window.TWP&&TWP.Modules&&TWP.Modules.setLargestHeight){a.parents(".set-largest-height").each(function(d,c){TWP.Modules.setLargestHeight(c.id);});}}function q(){return 3*G;}function AL(){if(!!AA.toLowerCase().match(B)){return 3*G;}else{return 40*M;}}function AO(){return 1*M/2;}function b(){return 48*G;}function h(){return"default";}function Y(){if(r=="age"){if(k){return" Live in {{ timestamp }}";}else{return" Updated {{ timestamp }} ago";}}else{return"{{ timestamp }}";}}function AG(){var AZ="";switch(r){case"age":if(U>0){var Aa=U,n,AU,AW,AT,Ab,AV;if(Aa<o){n=Math.floor(p(Aa));Aa=Aa-(n*M);AU=Math.floor(z(Aa));Aa=Aa-(AU*N);AW=Math.floor(AM(Aa));Aa=Aa-(AW*G);AT=Math.floor(u(Aa));Aa=Aa-(AT*E);Ab=Math.floor(S(Aa));ageInMillis=Aa-(Ab*D);AV=0;if(!!n&&AV<AJ){AZ+=n+x("y",AK,n);AV++;}if(!!AU&&AV<AJ){AZ+=" "+AU+x("d",AK,AU);AV++;}if(!!AW&&AV<AJ){AZ+=" "+AW+x("h",AK,AW);AV++;}if(!!AT&&AV<AJ){AZ+=" "+AT+x("m",AK,AT);AV++;}if(!AZ){AZ+="less than 1"+x("s",AK,1);}}}break;case"recent":var Ac=(AN.getHours()%12);Ac=(Ac==0)?12:Ac;var AX=AN.getMinutes();AX=(AX<10)?0+""+AX:AX;var d=(AN.getHours()<12)?"AM":"PM";AZ=Ac+":"+AX+"&nbsp;"+d+"&nbsp;ET";break;case"recent-stream-topic":var Ac=(AN.getHours()%12);Ac=(Ac==0)?12:Ac;var AX=AN.getMinutes();AX=(AX<10)?0+""+AX:AX;var d=(AN.getHours()<12)?"AM":"PM";var c=P[AN.getDay()].toUpperCase();var AY=H[AN.getMonth()].toUpperCase()+"&nbsp;"+AN.getDate();AZ="<b>"+Ac+":"+AX+"&nbsp;"+d+"&nbsp;ET</b>";AZ+="<br/>"+c+",<br/>"+AY;break;case"recent-detailed":var AY=H[AN.getMonth()].toUpperCase()+"&nbsp;"+AN.getDate();var Ac=(AN.getHours()%12);Ac=(Ac==0)?12:Ac;var AX=AN.getMinutes();AX=(AX<10)?0+""+AX:AX;var d=(AN.getHours()<12)?"AM":"PM";AZ=AY+", "+Ac+":"+AX+"&nbsp;"+d+"&nbsp;ET";break;case"live":AZ="Live".toUpperCase();break;case"old":AZ=H[AN.getMonth()].toUpperCase()+"&nbsp;"+AN.getDate();break;case"old-stream-topic":var c=P[AN.getDay()].toUpperCase();var AY=H[AN.getMonth()].toUpperCase()+"&nbsp;"+AN.getDate();AZ=c+",<br/><b>"+AY+"</b>";break;case"this-week":var c=P[AN.getDay()].toUpperCase();var AY=H[AN.getMonth()].toUpperCase()+"&nbsp;"+AN.getDate();AZ=c+", "+AY;break;case"archive":AZ=H[AN.getMonth()].toUpperCase()+"&nbsp;"+AN.getDate()+", "+AN.getFullYear();break;case"archive-stream-topic":var c=P[AN.getDay()].toUpperCase();var AY=H[AN.getMonth()].toUpperCase()+"&nbsp;"+AN.getDate()+", "+AN.getFullYear();AZ=c+",<br/><b>"+AY+"</b>";break;case"leaf-recent":var c=P[AN.getDay()];var AY=C[AN.getMonth()]+"&nbsp;"+AN.getDate();var Ac=(AN.getHours()%12);Ac=(Ac==0)?12:Ac;var AX=AN.getMinutes();AX=(AX<10)?0+""+AX:AX;var d=(AN.getHours()<12)?"AM":"PM";AZ=c+", "+AY+', <span class="time special">'+Ac+":"+AX+"&nbsp;"+d+"</span>";break;case"leaf-old":AZ=C[AN.getMonth()]+"&nbsp;"+AN.getDate();break;case"leaf-archive":AZ=C[AN.getMonth()]+"&nbsp;"+AN.getDate()+", "+AN.getFullYear();break;case"hp":AZ=C[AN.getMonth()]+"&nbsp;"+AN.getDate()+", "+AN.getFullYear();break;case"long":AZ=AN.toString();break;case"none":AZ="";break;default:AZ="";}if(!!V){return V.replace(/{{\s*timestamp\s*}}/,AZ);}else{return AZ;}}function S(c){return c/D;}function u(c){return c/E;}function AM(c){return c/G;}function z(c){return c/N;}function p(c){return c/M;}function y(d,c){c=c||AF;return(d.getFullYear()==c.getFullYear());}function T(d,c){c=c||AF;return(y(d,c)&&(d.getMonth()==c.getMonth()));}function t(d,c){c=c||AF;return(y(d,c)&&T(d,c)&&(d.getDate()==c.getDate()));}function x(c,AT,AU){var d=(AT=="blank"?J:(AT=="full")?I:(AT=="abbr")?O:K)[c];if(AU==1&&(AT=="full"||AT=="abbr")){d=d.replace(/s$/,"");}return d;}});};})(jQuery);(function(B,A,C){B.fn.relativeDate=function(G){var H={dateGetter:function(J){return B(J).text();}},E=B.extend({},H,G),D=function(K){var J=new Date;J.setTime(Date.parse(K));return F(J);},F=function(J){return I(new Date,J);},I=function(M,L){var K=((M-L)/1000);var J=Math.floor(K/60);if(J==0){return"less than a minute ago";}if(J==1){return"a minute ago";}if(J<45){return J+" minutes ago";}if(J<90){return"about 1 hour ago";}if(J<1440){return"about "+Math.floor(J/60)+" hours ago";}if(J<2880){return"1 day ago";}if(J<43200){return Math.floor(J/1440)+" days ago";}if(J<86400){return"about 1 month ago";}if(J<525960){return Math.floor(J/43200)+" months ago";}if(J<1051199){return"about 1 year ago";}return"over "+Math.floor(J/525960)+" years ago";};return B(this).each(function(){date_str=E.dateGetter(this);B(this).html(D(date_str));});};})(jQuery,window);(function(A){A.fn.storyflipper=function(B){return this.each(function(){new A.storyflipper(this,B);});};A.storyflipper=function(C,B){var D={paginationType:"default"};this.options=A.extend(D,B);this.props={prevAvail:false,nextAvail:true,isSetUp:false};this.classes={deactivated:"deactivated",on:"on"};this.Elems={};this.init(C);};A.storyflipper.fn=A.storyflipper.prototype={};A.storyflipper.fn.extend=A.storyflipper.extend=A.extend;A.storyflipper.fn.extend({init:function(B){if(!this.props.isSetUp){this.cacheElems(B);this.setUp(B,this);this.props.isSetUp=true;this.setupControls(this.Elems.$prevControl);this.setupControls(this.Elems.$nextControl);this.assignHandlers(this);}},cacheElems:function(B){this.Elems.$stories=A(".story",B);this.Elems.$storiesContainer=A(".stories-container",B);this.Elems.$pageControls=A(".carousel-page-control",B);this.Elems.$prevControl=A(".carousel-control-prev",B);this.Elems.$nextControl=A(".carousel-control-next",B);if(this.options.paginationType=="numbered"){this.Elems.$pagination=A(".pagination-list ul",B);}},setUp:function(E,G){if(this.options.paginationType=="default"){var F='<li class="carousel-page-control"><a href="';var D='"></a></li>';}else{if(this.options.paginationType=="numbered"){var F='<li class="page-control"><a href="';var D='">';var C="</a></li>";}}var B="";this.Elems.$stories.each(function(H,J){var I=A(J);if(H!=0){if(G.options.paginationType=="default"){B=B+F+H+D;}else{if(G.options.paginationType=="numbered"){B=B+F+H+D+(H+1)+C;}}}});if(this.options.paginationType=="default"){this.Elems.$nextControl.before(B);this.Elems.$pageControls=A(".carousel-page-control",E);}if(this.options.paginationType=="numbered"){this.Elems.$pagination.append(B);this.Elems.$pageControls=A(".page-control",E);}this.Elems.$stories.each(function(H,J){var I=A(J);I.css("position","static");I.css("visibility","visible");if(H!=0){I.css("display","none");}});TWP.Modules.setLargestHeight(this.Elems.$stories,this.Elems.$storiesContainer);},assignHandlers:function(B){this.Elems.$prevControl.click(function(C){C.preventDefault();B.runControls("prev",A(this));});this.Elems.$nextControl.click(function(C){C.preventDefault();B.runControls("next",A(this));});this.Elems.$pageControls.click(function(C){C.preventDefault();B.swapStory(this,B);});},runControls:function(D,C){var E;D=="prev"?E=this.props.prevAvail:E=this.props.nextAvail;if(!E){return ;}var B=this.findNextPrevOn(D);this.swapStory(B,this);this.testControls();this.setupControls(C);
this.setupControls(this.Elems.$nextControl);},testControls:function(){var C=this.findNextPrevOn("prev");var B=this.findNextPrevOn("next");C.length==0?this.props.prevAvail=false:this.props.prevAvail=true;B.length==0?this.props.nextAvail=false:this.props.nextAvail=true;},setupControls:function(B){B.hasClass("carousel-control-prev")?test=this.props.prevAvail:test=this.props.nextAvail;if(!test){B.addClass(this.classes.deactivated);}else{B.removeClass(this.classes.deactivated);}},findNextPrevOn:function(B){return this.Elems.$stories.filter("."+this.classes.on)[B]();},swapStory:function(E,F){var C=this.classes.on;if(E instanceof jQuery){var E=E;}else{var D=A("a",E).attr("href");D=D.match(/\d$/);this.Elems.$stories.each(function(G,H){if(G==D){E=A(H);}});}if(!A.browser.msie){this.Elems.$storiesContainer.animate({opacity:0},"fast",function(){E.css("display","block");E.siblings().css("display","none");F.Elems.$storiesContainer.animate({opacity:1},"fast");});}else{E.siblings().css("display","none");E.css("display","block");}E.addClass(C);E.siblings().removeClass(C);var B=E.attr("rel");this.Elems.$pageControls.each(function(G,H){if(G==B){A(H).addClass("on");}else{A(H).removeClass("on");}});this.testControls();this.setupControls(this.Elems.$prevControl);this.setupControls(this.Elems.$nextControl);}});})(jQuery);