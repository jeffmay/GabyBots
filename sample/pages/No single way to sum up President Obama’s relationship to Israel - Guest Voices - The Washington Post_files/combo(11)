(function(){TWP.Util=TWP.Util||{};TWP.Util.User=function(){var C=false;var N=false;var I=null;var G="";var D="";var J=null;var H=false;var E="washington-post";var F=["wapo_display"];var K=["wapo_login_id"];var B=["at"];function O(R,Q){var S=-1,P=-1;S=(R.indexOf(Q)+Q.length+1);P=(J.indexOf(";",S))==-1?J.length:J.indexOf(";",S);return R.substring(S,P).split("|")[0];}function M(){var S,P,V,U=document.cookie.split(";");for(S=0;S<U.length;S++){var P=U[S].substr(0,U[S].indexOf("="));var V=U[S].substr(U[S].indexOf("=")+1);var P=P.replace(/^\s+|\s+$/g,"");if(P=="at"){var R=unescape(V);var Q=R.split("=")[3];var T=false;if(Q){Q=Q.split("&")[0];if(Q){var T=A(Q);}else{return T;}}else{return T;}return(Q.length>0&&typeof Q=="string"&&T)?Q:false;}}}function A(Q){var P=Q.indexOf("@");var R=Q.lastIndexOf(".");if(P<1||R<P+2||R+2>=Q.length){return false;}else{return true;}}function L(){var Q=document.location.href;if(Q.indexOf("localhost")>-1){var S=$.cookie("TWPNIUCID");if(typeof S=="undefined"){var R=new Date();var P="TWPNI"+R.getTime()+"."+Math.round(Math.random()*10000);R.setTime(R.getTime()+31104000000);$.cookie("TWPNIUCID",P,{domain:".washingtonpost.com",expires:R,path:"/"});}}}return{init:function(){if(C){return ;}C=true;var Q="";for(var P=0;P<K.length;P++){if(document.cookie.indexOf(K[P])!=-1){N=true;break;}}for(var P=0;P<F.length;P++){if(document.cookie.indexOf(F[P])!=-1){J=document.cookie;E=F[P];break;}}if(N){switch(E){case"fbuname":Q=O(J,E,8);break;default:Q=O(J,E,9);break;}I=(Q.indexOf("@")!==-1)?Q.substring(0,Q.indexOf("@")):Q;I=I.replace(/"/gi,"");G=Q;D=M();}L();},getUserCookie:function(){return(J.length>0&&typeof J=="string")?J:null;},getUserType:function(){return(E.length>0&&typeof E=="string")?E:null;},getUserId:function(){return G;},getUserName:function(){return(typeof I=="string")?I:"";},getUserEmail:function(){return(D.length<0||D==false)?null:D;},getAuthentication:function(){return N;}};}();TWP.Util.User.init();})();(function(){window.TWP=window.TWP||{};TWP.Identity=TWP.Identity||{};TWP.server=TWP.server||window.location.href.match(/^.*?:\/\/.*?\//)[0];TWP.Identity.setAuthenticationLink=function(){var G=document.getElementById("global-signin");var A=document.getElementById("global-registration");var C=null;var F=null;var E=window.location.href.split("?")[0];var D=this.objs;if(G&&A&&(TWP.server.match(/digitalink\.com|washingtonpost\.com|wpprivate\.com/ig)!=null)){if(TWP.Util.User.getAuthentication()){C=TWP.Util.User.getUserName();F=(typeof TWP.signedInProvider=="function")?TWP.signedInProvider():"Washington Post";F=(typeof F!="undefined")?F.toLowerCase():"";var B=((F.indexOf("facebook")>=0)?'<a class="icon share facebook" ':"<span>Hello </span><a ")+' href="'+TWP.signin.profileurl+E+'">'+C+"</a>";G.innerHTML=B;A.innerHTML='<a href="'+TWP.signin.logouturl_page+'">Sign Out</a>';}else{G.innerHTML='<a href="'+TWP.signin.loginurl_page+E+'">Sign In</a>';A.innerHTML='<a href="'+TWP.signin.registrationurl_page+E+'">Register</a>';}}};TWP.Identity.setHandlers=function(){};TWP.Identity.init=function(){TWP.Identity.setAuthenticationLink();TWP.Identity.setHandlers();};TWP.Identity.init();})();