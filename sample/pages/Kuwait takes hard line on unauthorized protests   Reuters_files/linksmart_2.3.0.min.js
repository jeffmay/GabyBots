// 672cc20f32260b2d5ba0b89fd64c6345db1abe4f
window.LS_ENV="production","x",window.debug=function(){function c(t){i&&(s||!n||!n.log)&&i.apply(e,t)}function h(e){return o>0?o>e:u.length+o<=e}var e=this,t=Array.prototype.slice,n=e.console,r={},i,s,o=9,u=["error","warn","info","debug","log"],a="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),f=a.length,l=[];while(--f>=0)(function(e){r[e]=function(){o!==0&&n&&n[e]&&n[e].apply(n,arguments)}})(a[f]);f=u.length;while(--f>=0)(function(i,s){r[s]=function(){var r=t.call(arguments),o=[s].concat(r);l.push(o),c(o);if(!n||!h(i))return;n.firebug?n[s].apply(e,r):n[s]?n[s](r):n.log(r)}})(f,u[f]);return r.setLevel=function(e){o=typeof e=="number"?e:9},r.setCallback=function(){var e=t.call(arguments),n=l.length,r=n;i=e.shift()||null,s=typeof e[0]=="boolean"?e.shift():!1,r-=typeof e[0]=="number"?e.shift():n;while(r<n)c(l[r++])},r}(),function(){var e=window.escape,t=window.navigator,n=window.console,r="getElementById",i="getElementsByTagName",s="createElement",o="createTextNode",u="appendChild",a="insertBefore",f="removeChild",l="getAttribute",c="setAttribute",h=[].slice,p=document[i]("head")[0],d={decodeQueryString:function(e){var t=e.substr(1);if(!t)return{};var n=t.split("&"),r={},i;for(var s=0;s<n.length;s++)i=n[s].split("="),r[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);return r},encodeQueryString:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return"?"+t.join("&")},obj:{clone:function(e){(e===null||e===undefined)&&b("obj is undefined!");var t=function(){};t.prototype=e;var n=new t;return n._original=e,n},copy:function(e){(e===null||e===undefined)&&b("obj is undefined!");var t={};for(var n in e)t[n]=e[n];return t},extend:function(){var e=h.call(arguments),t=e.shift(),n,r;for(var i=0;i<e.length;i++){n=e[i];for(r in n)t[r]=n[r]}return t}},is:{blank:function(e){return e===""||e===null||e===undefined},present:function(e){return!d.is.blank(e)}},elem:{addEventListener:function(e,t,n){document.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n)},removeEventListener:function(e,t,n){document.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)}},evt:{preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},script:{load:function(e,t){var n=document[s]("script"),r;n.onload=n.onerror=n.onreadystatechange=function(){if(n.readyState&&!/^c|loade/.test(n.readyState)||r)return;n.onload=n.onreadystatechange=null,r=!0,t()},n.async=!0,n.src=e,p[a](n,p.firstChild)}}},v=function(){var e=d.decodeQueryString(window.location.search),t=e.ls_debug?"development":window.LS_ENV||"development";return t}(),m=window._mb_site_guid,g=function(){return/^(?:(?:10|127|192)\.|localhost)/.test(location.host)};RegExp.quote=function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")};var y=function(e){this.message=e};y.prototype=new Error,y.prototype.constructor=y,y.prototype.name="LSError";var b=function(e){throw new y(e)},w=function(e){try{e.apply(e,arguments)}catch(t){if(t instanceof y){if(v!="production")throw t;E.info("LS error: "+t.message)}}},E=window.debug;v=="production"?E.setLevel(3):E.setLevel(2);var S=function(n){function N(e){return function(t){var n=!1;typeof t=="object"&&(n=t),n&&e(n)}}function C(){return g()?location.host:"ms.erovinmo.com"}function k(){var e;return g()?e=location.host:e="mis.erovinmo.com",document.location.protocol+"//"+e+"/"}function L(e,t,n){n=n||"post";var o=document[r]("ls_redirect_form");if(!o){o=document[s]("form"),o[c]("id","ls_redirect_form"),o[c]("target","mandelbrot_iframe_statefull"),o[c]("method",n),o[c]("action",e);for(var a in t){var f=document[s]("input");f[c]("type","hidden"),f[c]("name",a),f[c]("value",t[a]),o[u](f)}}var l=document[r]("mandelbrot_iframe_statefull"),h;l.contentDocument?h=l.contentDocument[i]("body")[0]:l.contentWindow&&(h=l.contentWindow.document[i]("body")[0]),h[u](o),o.submit()}function A(e,t){var n=new Date;n.setFullYear(parseInt(n.getFullYear(),10)+5,0,1),document.cookie=e+"="+t+"; expires="+n.toUTCString()+"; path=/"}function O(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"="),n,r;if(t!==-1){t=t+e.length+1;var i=[],s=document.cookie.indexOf(";",t);return s>0&&i.push(s),s=document.cookie.indexOf("|",t),s>0&&i.push(s),i.length?r=Math.min.apply(null,i):r=document.cookie.length,n=document.cookie.substring(t,r),n}}return""}function M(){var e=O("_lsd0");if(e.length>0)return e;var t="XXXX-LSd0XXXXXXXXXXXX".replace(/[X]/g,function(e){var t=Math.random()*36|0;return t.toString(36).toUpperCase()}),n=function(e){var t=""+e;while(t.length<2)t="0"+t;return t},r=new Date,i=[r.getUTCFullYear(),n(r.getUTCMonth()+1),n(r.getUTCDate()),"T",n(r.getUTCHours()),n(r.getUTCMinutes()),n(r.getUTCSeconds())].join(""),s=t+"."+i;return A("_lsd0",s),O("_lsd0")}function _(e){var t="",n;for(n in e)t+=n+"="+e[n]+"&";return t+="client_timestamp="+D()/1e3,t}function D(){var e=new Date;return""+e.getTime()}var h="",p=!1,v="",y=null,x=0,T=!1,P=new function(){this.process=function(e,t,n,r,i){this.core=e,this.impressionId=t,this.keywordSequenceId=n,this.site=r||{},this.keywords=this.selectEligibleKeywords(i),this.blockKeywordInstanceCount={},this.groupKeywordsByBlock(),this.processBlocks()},this.incrementBlockKeywordInstanceCount=function(e){var t=this.blockKeywordInstanceCount;t.hasOwnProperty(e.xpath)||(t[e.xpath]={});var n=t[e.xpath];return n.hasOwnProperty(e.name)||(n[e.name]=0),n[e.name]+=1},this.getBlockKeywordInstanceCount=function(e){var t=this.blockKeywordInstanceCount;return t.hasOwnProperty(e.xpath)?t[e.xpath][e.name]||0:0},this.selectEligibleKeywords=function(e){var t=[],n,r;for(var i=0;i<e.length;i++)n=e[i],r=n.sequence_code==1&&n.destination_uri&&this.normalizeUrl(n.destination_uri)!=this.normalizeUrl(window.location.href)&&n.keyword_type!="alchemy",r&&(n.regex=new RegExp("(^|\\s)("+RegExp.quote(n.name)+")"+'(?:[\\s\\.,?!\\)\\]\\}>:;"]|$)',"gim"),t.push(n));return t},this.groupKeywordsByBlock=function(){var e={},t={},n,r,i;for(var s=0;s<this.keywords.length;s++)n=this.keywords[s],n.block=r=n.dom_reference,i=n.xpath,e.hasOwnProperty(i)||(e[i]=[]),e[i].push(n),t[i]=r;this.keywordsByBlock=e,this.blocksByXpath=t},this.processBlocks=function(){for(var e in this.keywordsByBlock)this.processElement(this.keywordsByBlock[e],this.blocksByXpath[e])},this.processElement=function(e,t){var n=t.childNodes,r,i;for(var s=0;s<n.length;)r=n[s],r.nodeType==Node.TEXT_NODE?(i=this.processTextNode(e,t,r),s+=i+1):(r.nodeName!="A"&&this.processElement(e,r),s++)},this.processTextNode=function(e,t,n){var r=n.nodeValue,i=this.collectKeywordMatches(r,e);if(!i.length)return 0;this.removeIntersectingKeywords(i),this.sortMatchesByReverseCharacterIndex(i);var s=this.buildReplacementNodes(r,i);return this.replaceTextNode(t,n,s),s.length-1},this.collectKeywordMatches=function(e,t){var n=[],r,i,s,o,u;for(var a=0;a<t.length;a++){i=t[a],r=this.getBlockKeywordInstanceCount(i);if(r==1)continue;s=i.regex;while(o=s.exec(e)){o.index==s.lastIndex&&s.lastIndex++,u=d.obj.clone(i),u.leadingWhitespace=o[1]||"",u.matchedKeyword=o[2],u.normalizedKeyword=i.name,u.startIndex=o.index+u.leadingWhitespace.length,u.endIndex=u.startIndex+u.matchedKeyword.length-1,u.doesIntersect=function(e){return e.startIndex<this.startIndex&&this.startIndex<e.endIndex},n.push(u),r=this.incrementBlockKeywordInstanceCount(i);if(r==1)break}}return n},this.removeIntersectingKeywords=function(e){var t,n;for(var r=e.length-1;r>=0;r--)t=e[r],n=e[r-1],r>0&&t.doesIntersect(n)&&e.splice(r,1)},this.sortMatchesByReverseCharacterIndex=function(e){e.sort(function(e,t){return t.startIndex>e.startIndex?1:t.startIndex<e.startIndex?-1:0})},this.buildReplacementNodes=function(e,t){var n=[],r,i,s,u;for(var a=0;a<t.length;a++)r=t[a],i=document[o](e.substring(r.endIndex+1)),s=this.buildLink(r),n.unshift(i),n.unshift(s),e=e.substring(0,r.startIndex),a==t.length-1&&r.startIndex>0&&(u=document[o](e),n.unshift(u));return n},this.replaceTextNode=function(e,t,n){for(var r=0;r<n.length;r++)e[a](n[r],t);e[f](t)},this.buildLink=function(e){var t=this,n="mandelbrot_refrag",r,i,a=document[s]("a");return r=e.destination_uri,e.internal&&(r=this.core.addUrlParam(r,"lc","int_mb_1001")),a[c]("href",r),a[c]("class",n),d.elem.addEventListener(a,"click",function(n){t.onClickLinkWithDestination(a,e,n)}),e.internal||(a[c]("rel","nofollow"),a[c]("target","_blank")),a[u](document[o](e.matchedKeyword)),i=document[s]("span"),i[c]("class",n),i[u](a),i},this.onClickLinkWithDestination=function(e,t,n){var r=this.core.buildKeywordRedirectParams(t,{impression_id:this.impressionId,keyword_sequence_id:this.keywordSequenceId,destination:t.destination_uri});try{this.core.postRedirect(r)}catch(i){}if(!t.internal)return!0;setTimeout(function(){window.location=e[l]("href")},400),d.evt.preventDefault(n)},this.normalizeUrl=function(e){var t=this.site.allowed_query_parameters,n,r,i,s,o;n=document.createElement("a"),n.href=e,r=d.decodeQueryString(n.search),i={};for(var u=0;u<t.length;u++)s=t[u],r.hasOwnProperty(s)&&(i[s]=r[s]);return n.search=d.encodeQueryString(i),n.hash="",e=n.href.replace(/(?:#|\?)+$/,""),e}};return{util:d,injectedKeywordProcessor:P,buildQueryString:function(e){var t,n=[];e.client_timestamp=D()/1e3;for(t in e)e[t]!==null&&e[t]!==undefined&&n.push([encodeURIComponent(t),encodeURIComponent(e[t])].join("="));return n.join("&")},postRedirect:function(e){var t=this.getMandelbrotUrl()+"redirects.js?jsoncallback=JSONPCallback&"+this.buildQueryString(e);this.fetchJSONP(t,function(e){})},fetchJSONP:function(e,t){var n="JSONPCallback_"+x++;window[n]=N(t),e=e.replace("=JSONPCallback","="+n);var r=document[s]("SCRIPT");r.src=e,document[i]("HEAD")[0][u](r)},addUrlParam:function(e,t,n){var r=t+"="+n,i="?"+r,s=e.split("?"),o="?"+(s.length==2?s[1]:"");if(o.length>1){var u=new RegExp("[?&]"+t+"[^&]*"),a=u.exec(o);a?a[0].charAt(0)=="&"?i=o.replace(a,"&"+r):a[0].charAt(0)=="?"&&(i=o.replace(a,"?"+r)):i=o+"&"+r}return s[0]+i},buildKeywordRedirectParams:function(e,t){var n=d.obj.extend({},{site_guid:this.siteGuid,user:M(),target:location.href,keyword_id:e.keyworduuid,keyword:e.name,internal:e.internal,existing:e.existing,is_publisher_campaign:e.is_publisher_campaign},t);return d.is.present(e.campaign_id)&&(n.cai=e.campaign_id),d.is.present(e.keyword_group_id)&&(n.kgi=e.keyword_group_id),d.is.present(e.category_id)&&(n.cii=e.category_id),d.is.present(e.dirty_bit)&&(n.dib=e.dirty_bit),n},initPayload:function(e){var t=document[r]("mandelbrot_iframe_statefull");t.src=this.getMandelbrotInstrumentationUrl()+"omni/cdcc_mandelbrot_min_2.html#xpath="+e+"&mandelbrot_url="+this.getMandelbrotInstrumentationUrl()},sendPayload:function(e){var t="uri="+encodeURIComponent(location.href)+"&xpath="+encodeURIComponent(e)+"&site_guid="+encodeURIComponent(this.siteGuid)+"&domain_host="+encodeURIComponent(location.host)+"&mandelbrot_url="+encodeURIComponent(this.getMandelbrotInstrumentationUrl())+"&payload="+encodeURIComponent(h),n=document[r]("mandelbrot_iframe_statefull");n.contentWindow.postMessage(t,this.getMandelbrotInstrumentationUrl())},setSiteGuid:function(e){this.siteGuid=e},setDemoMode:function(e){p=e},setMandelbrotUrl:function(){y="//"+C()+"/"},getMandelbrotUrl:function(){return y},getMandelbrotInstrumentationUrl:function(){return k()},jsonpUrl:function(){var n={referrer:e(document.referrer),href:e(location.href),appCodeName:e(t.appCodeName),appMinorVersion:e(t.appMinorVersion),appName:e(t.appName),appVersion:e(t.appVersion),cpuClass:e(t.cpuClass),platform:e(t.platform),systemLanguage:e(t.systemLanguage),userAgent:e(t.userAgent),userLanguage:e(t.userLanguage),runningLocally:g()?1:0},r=M(),i="&user="+r+"&"+_(n);return this.getMandelbrotUrl()+"keywords/instrument.js?jsoncallback=JSONPCallback&rewrite=1"+i+"&target="+encodeURIComponent(location.href)+"&site_guid="+this.siteGuid+"&demo_mode="+(p||location.href.indexOf("mandelbrot_demo_mode=1")>=0)},outerHTML:function(t){return t.outerHTML||function(e){var t=document[s]("div"),n;return t[u](e.cloneNode(!0)),n=t.innerHTML,t=null,n}(t)},concatenateXpaths:function(e){var t=[],n={},r;for(var i=0;i<e.length;i++)r=e[i],n[r.xpath]||(t.push(r.xpath),n[r.xpath]=1);return t.join("|")},findKeywordDomReferences:function(e){var t=this.concatenateXpaths(e),n=[],r;try{r=document.evaluate(t,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null)}catch(i){return E.debug(i.stack),[]}var s,o;for(var u=0;u<e.length;u++)s=e[u],o=r.snapshotItem(s.element_index),o||b("Undefined dom_reference for keyword #"+s.element_index),s.dom_reference=o;return e},decodeKeywordAttributes:function(e){var t=[],n=["internal","existing","is_publisher_campaign"],r=["block_count","element_index","rank","sequence_code","xpath_index","xpath_position"],i,s,o,u;for(i=0;i<e.length;i++){o=d.obj.copy(e[i]);for(u in o)d.is.blank(o[u])&&delete o[u];for(s=0;s<n.length;s++)u=n[s],o[u]=(o[u]||"").toString().toLowerCase()==="true";for(s=0;s<r.length;s++)u=r[s],u in o&&(o[u]=parseInt(o[u],10));t.push(o)}return t},ensureUniqueSetOfKeywordsPerElement:function(e){var t={},n;for(var r=0;r<e.length;)n=e[r],t[n.xpath]&&t[n.xpath][n.name]?e.splice(r,1):(t[n.xpath]=t[n.xpath]||{},t[n.xpath][n.name]=1,r++)},sortKeywordsByElementIndex:function(e){e.sort(function(e,t){return e.element_index>t.element_index?1:e.element_index<t.element_index?-1:0})},renumberElementIndices:function(e){var t=0,n,r;for(var i=0;i<e.length;i++)n=e[i],r!=null&&n.xpath!=r&&t++,n.element_index=t,r=n.xpath},preprocessKeywords:function(e){var t=this.decodeKeywordAttributes(e);return this.ensureUniqueSetOfKeywordsPerElement(t),this.sortKeywordsByElementIndex(t),this.renumberElementIndices(t),t},processBlacklists:function(e){var t,n,r,i;if(e.xpaths){if(e.blacklists&&e.blacklists.length){i=document.cloneNode(!0);if(i){var s=[];try{var o=i.evaluate(e.blacklists.join("|"),i,null,XPathResult.ANY_TYPE,null),u=o.iterateNext();while(u)s.push(u),u=o.iterateNext();for(n=0;n<s.length;n++)try{s[n].innerHTML=""}catch(a){}}catch(f){}}}else i=document;this.postXpathResultToIframe(e,i)}},postXpathResultToIframe:function(e,t){var n=0,r,i,s;try{for(var o=0;o<e.xpaths.length;o++)i=t.evaluate(e.xpaths[o],t,null,9,null),i.singleNodeValue!==undefined&&i.singleNodeValue&&(n===0||i.singleNodeValue.innerHTML.length<n)&&(r=i.singleNodeValue,n=r.innerHTML.length,s=e.xpaths[o])}catch(u){}r!=null&&(h=r.innerHTML,window.postMessage&&this.initPayload(s))},assignPublisherAnchorEvents:function(e,t){var n=this;t=this.preprocessKeywords(t);var r=this.findKeywordDomReferences(t);this.impressionId=e.impression_id,this.keywordSequenceId=e.keyword_sequence_id;for(var i=0;i<r.length;i++)(function(){var e=r[i],t=e.dom_reference,s,o;if(!t)return;t[c]("data-ls-seen","1"),e.destination_uri_override?(e.internal||(t[c]("rel","nofollow"),t[c]("target","_blank")),t.href=e.destination_uri_override,d.elem.addEventListener(t,"mousedown",function(r){n.trackOverriddenLink(t,e,r)})):document.addEventListener?t.addEventListener("mousedown",function(r){n.trackExistingLink(t,e,r)}):document.attachEvent&&(o=function(r){n.trackExistingLink(t,e,r)},t.attachEvent("onmousedown",o),t.attachEvent("onmouseup",o))})();return r},trackOverriddenLink:function(e,t,n){n=n||window.event;var r="data-ls-overridden-link-tracked";if(n.button==2)return!0;if(e[l](r))return!0;e[c](r,1);var i=S.buildKeywordRedirectParams(t,{impression_id:this.impressionId,keyword_sequence_id:this.keywordSequenceId,destination:t.destination_uri_override,existing:!0,override:!0});e.href=this.getMandelbrotUrl()+"redirect_proxy.js?"+this.buildQueryString(i)},trackExistingLink:function(e,t,n){n=n||event;var r="data-ls-existing-link-tracked";if(n.button==2)return!0;if(e[l](r))return!0;e[c](r,1);var i=S.buildKeywordRedirectParams(t,{impression_id:this.impressionId,keyword_sequence_id:this.keywordSequenceId,destination:t.destination_uri_publisher,existing:!0});try{S.postRedirect(i)}catch(s){}},processInjectedKeywords:function(e,t,n,r){r=this.preprocessKeywords(r),this.findKeywordDomReferences(r),this.injectedKeywordProcessor.process(this,e,t,n,r)},processSequences:function(e){this.processBlacklists(e),e.existing_keywords&&this.assignPublisherAnchorEvents(e,e.existing_keywords),e.keywords&&this.processInjectedKeywords(e.impression_id,e.keyword_sequence_id,e.site,e.keywords)},init:function(){var e=this;if(this.fired)return;this.fired=!0,this.setDemoMode(!1),this.setSiteGuid(m.toLowerCase()),this.setMandelbrotUrl(),this.createIFrame(),this.addDOMExtensions(),this.subscribeToMessages(),w(function(){e.fetchSequences()})},initWhenReady:function(){var e=this;d.elem.addEventListener(window,"load",function(){e.init()})},createIFrame:function(){var e=document[s]("iframe");e[c]("id","mandelbrot_iframe_statefull"),e[c]("name","mandelbrot_iframe_statefull"),e[c]("height","0px"),e[c]("width","0px"),e[c]("style","visibility:hidden;display:none"),document.body[u](e)},addDOMExtensions:function(){window.Node==null&&(window.Node={TEXT_NODE:3})},subscribeToMessages:function(){var e=this;d.elem.addEventListener(window,"message",function(t){e.receiveMessage(t)})},receiveMessage:function(e){var t=e.data.split("&"),n,r,i;for(n=0;n<t.length;n++){r=t[n].split("=",2);if(r[0].toLowerCase()=="xpath"){i=t[n].indexOf("="),this.sendPayload(t[n].substring(i+1));break}}},fetchSequences:function(){var e=this;try{this.fetchJSONP(this.jsonpUrl(),function(t){e.whenXpathSupportAvailable(function(){e.processSequences(t)})})}catch(t){}},whenXpathSupportAvailable:function(e){var t=this,n=function(){t.xpathSupportAvailable=!0,e()};!this.xpathSupportAvailable&&document.evaluate==null?d.script.load("//cdn.linksmart.com/xpath_0.0.1.min.js",n):n()}}}();S.initWhenReady()}();